## 复习练习题

![image-20200212091303193](asset/image-20200212091303193.png)

![image-20200212092014886](asset/image-20200212092014886.png)

## 处理二次请求



从服务器获取html文件之后，如果这个html文件中还引用了其它的外部资源（图片，样式文件等），则浏览器会重新再发请求。



## 显示图片

`fs.readFileSync('./6.png')`

图片文件不是字符串格式，而应该是buffer格式

```javascript
else if(req.url === '/6.png') {
        // 读出图片的内容并返回
        // 图片文件不是字符串格式，而应该是buffer格式
        // readFileSync 不设置utf8就是buffer.
        // let cssStr = fs.readFileSync('./6.png','utf8');
        let fileBuffer = fs.readFileSync('./6.png');

        // res.end(字符串 | buffer)
        res.setHeader('content-type', 'image/png')
        res.end(fileBuffer)
    }
```



## 设置响应头

 `res.setHeader('content-type', 'text/css;charset=utf-8')`

```javascript
else if(req.url === '/style.css') {
    // 读出style.css并返回
    let cssStr = fs.readFileSync('./style.css','utf8');

    //设置响应头。
    // 响应头中的信息会被浏览器收到，浏览器会根据响应头中设置信息做相对应的处理。
    // 具体到content-type,这个响应头的作用是告诉浏览器本次响应体中数据是 什么东东。
    // text/css;charset=utf-8  .类形是css文本，编码是utf8格式。

    // 如果没有设置content-type,则浏览器会自已去识别 响应体中数据的类型。

    // 名字是：content-type，值是：text/css;charset=utf-8
    res.setHeader('content-type', 'text/css;charset=utf-8')
    res.end(cssStr)
}
```



## web服务器

目标：让放在某个文件夹下的所有的静态资源（.html,.css,.png....）都能直接访问。



思路 ：

 // 1. 获取当前用户要访问的资源路径。req.url

  // 2. 拼接服务器上对应的文件地址： /index.html =======> public94/index.html

  // 3. 读出来，并返回

 //  4. 读不出来，不存在这个文件，则返回404